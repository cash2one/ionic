/**
 * 
 */
package test;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.annotation.Rollback;

import com.thinkgem.jeesite.common.test.SpringTransactionalContextTests;
import com.thinkgem.jeesite.modules.customer.service.CustomerAccountService;
import com.thinkgem.jeesite.modules.entity.CustomerAccount;
import com.thinkgem.jeesite.modules.project.ProjectConstant;
import com.thinkgem.jeesite.modules.yeepay.handler.YeepayCommonHandler;

/**
 * @author yangtao
 *
 */

public class RepayTest extends SpringTransactionalContextTests {
	@Autowired
	CustomerAccountService customerAccountService;
	@Autowired
	YeepayCommonHandler yeepayCommonHandler;

	@Test
	@Rollback(value = false)
	public void testMarketing() throws Exception {
		Object[][] datas = {
				{35238,"8.0","完成首次投资送现金","0"},
				{23263,"2.88","好友完成首次投资送现金","0"},
				{23263,"1.0","好友完成首次投资送投资额千分之一现金","0"},
				{30042,"8.0","完成首次投资送现金","0"},
				{23156,"2.88","好友完成首次投资送现金","0"},
                {23156,"0.2","好友完成首次投资送投资额千分之一现金","0"},
                {35225,"8.0","完成首次投资送现金","0"},
                {23166,"2.88","好友完成首次投资送现金","0"},
                {23166,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {35205,"8.0","完成首次投资送现金","0"},
                {29531,"2.88","好友完成首次投资送现金","0"},
                {29531,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33656,"8.0","完成首次投资送现金","0"},
                {35173,"8.0","完成首次投资送现金","0"},
                {23166,"2.88","好友完成首次投资送现金","0"},
                {23166,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {35108,"8.0","完成首次投资送现金","0"},
                {33486,"2.88","好友完成首次投资送现金","0"},
                {33486,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {35003,"8.0","完成首次投资送现金","0"},
                {23215,"2.88","好友完成首次投资送现金","0"},
                {23215,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34880,"8.0","完成首次投资送现金","0"},
                {34949,"8.0","完成首次投资送现金","0"},
                {34928,"8.0","完成首次投资送现金","0"},
                {23215,"2.88","好友完成首次投资送现金","0"},
                {23215,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34811,"8.0","完成首次投资送现金","0"},
                {33486,"2.88","好友完成首次投资送现金","0"},
                {33486,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34583,"8.0","完成首次投资送现金","0"},
                {33486,"2.88","好友完成首次投资送现金","0"},
                {33486,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34525,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34490,"8.0","完成首次投资送现金","0"},
                {23263,"2.88","好友完成首次投资送现金","0"},
                {23263,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34404,"8.0","完成首次投资送现金","0"},
                {32824,"2.88","好友完成首次投资送现金","0"},
                {32824,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34366,"8.0","完成首次投资送现金","0"},
                {32824,"2.88","好友完成首次投资送现金","0"},
                {32824,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34331,"8.0","完成首次投资送现金","0"},
                {32586,"2.88","好友完成首次投资送现金","0"},
                {32586,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33094,"8.0","完成首次投资送现金","0"},
                {33981,"8.0","完成首次投资送现金","0"},
                {23263,"2.88","好友完成首次投资送现金","0"},
                {23263,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33940,"8.0","完成首次投资送现金","0"},
                {33486,"2.88","好友完成首次投资送现金","0"},
                {33486,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33913,"8.0","完成首次投资送现金","0"},
                {33486,"2.88","好友完成首次投资送现金","0"},
                {33486,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33725,"8.0","完成首次投资送现金","0"},
                {33486,"2.88","好友完成首次投资送现金","0"},
                {33486,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33827,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33731,"8.0","完成首次投资送现金","0"},
                {33391,"2.88","好友完成首次投资送现金","0"},
                {33391,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33668,"8.0","完成首次投资送现金","0"},
                {32722,"2.88","好友完成首次投资送现金","0"},
                {32722,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33583,"8.0","完成首次投资送现金","0"},
                {32401,"2.88","好友完成首次投资送现金","0"},
                {32401,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32428,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33499,"8.0","完成首次投资送现金","0"},
                {32401,"2.88","好友完成首次投资送现金","0"},
                {32401,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32642,"8.0","完成首次投资送现金","0"},
                {32401,"2.88","好友完成首次投资送现金","0"},
                {32401,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32687,"8.0","完成首次投资送现金","0"},
                {33389,"8.0","完成首次投资送现金","0"},
                {33399,"8.0","完成首次投资送现金","0"},
                {33396,"8.0","完成首次投资送现金","0"},
                {33393,"8.0","完成首次投资送现金","0"},
                {22959,"2.88","好友完成首次投资送现金","0"},
                {22959,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {31227,"8.0","完成首次投资送现金","0"},
                {33385,"8.0","完成首次投资送现金","0"},
                {33382,"8.0","完成首次投资送现金","0"},
                {33381,"8.0","完成首次投资送现金","0"},
                {400,"2.88","好友完成首次投资送现金","0"},
                {400,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33333,"8.0","完成首次投资送现金","0"},
                {29531,"2.88","好友完成首次投资送现金","0"},
                {29531,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33229,"8.0","完成首次投资送现金","0"},
                {23263,"2.88","好友完成首次投资送现金","0"},
                {23263,"1.0","好友完成首次投资送投资额千分之一现金","0"},
                {33239,"8.0","完成首次投资送现金","0"},
                {32707,"2.88","好友完成首次投资送现金","0"},
                {32707,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33203,"8.0","完成首次投资送现金","0"},
                {32351,"8.0","完成首次投资送现金","0"},
                {32722,"2.88","好友完成首次投资送现金","0"},
                {32722,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33121,"8.0","完成首次投资送现金","0"},
                {33155,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33166,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33164,"8.0","完成首次投资送现金","0"},
                {475,"8.0","完成首次投资送现金","0"},
                {32351,"2.88","好友完成首次投资送现金","0"},
                {32351,"0.2","好友完成首次投资送投资额千分之一现金","0"},
                {32946,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33006,"8.0","完成首次投资送现金","0"},
                {33094,"2.88","好友完成首次投资送现金","0"},
                {33094,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33123,"8.0","完成首次投资送现金","0"},
                {346,"8.0","完成首次投资送现金","0"},
                {32586,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32943,"8.0","完成首次投资送现金","0"},
                {23564,"8.0","完成首次投资送现金","0"},
                {32929,"2.88","好友完成首次投资送现金","0"},
                {32929,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33091,"8.0","完成首次投资送现金","0"},
                {33070,"8.0","完成首次投资送现金","0"},
                {23216,"2.88","好友完成首次投资送现金","0"},
                {23216,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {23268,"8.0","完成首次投资送现金","0"},
                {32973,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34224,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34871,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33264,"8.0","完成首次投资送现金","0"},
                {34528,"8.0","完成首次投资送现金","0"},
                {34495,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {34482,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33991,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33830,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33275,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33648,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33534,"8.0","完成首次投资送现金","0"},
                {123,"2.88","好友完成首次投资送现金","0"},
                {123,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33519,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33404,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33409,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33386,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33373,"8.0","完成首次投资送现金","0"},
                {123,"2.88","好友完成首次投资送现金","0"},
                {123,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33364,"8.0","完成首次投资送现金","0"},
                {123,"2.88","好友完成首次投资送现金","0"},
                {123,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33359,"8.0","完成首次投资送现金","0"},
                {23268,"2.88","好友完成首次投资送现金","0"},
                {23268,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32513,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33323,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33263,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33235,"8.0","完成首次投资送现金","0"},
                {813,"2.88","好友完成首次投资送现金","0"},
                {813,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33111,"8.0","完成首次投资送现金","0"},
                {123,"2.88","好友完成首次投资送现金","0"},
                {123,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {33213,"8.0","完成首次投资送现金","0"},
                {332,"2.88","好友完成首次投资送现金","0"},
                {332,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32895,"8.0","完成首次投资送现金","0"},
                {31463,"2.88","好友完成首次投资送现金","0"},
                {31463,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32352,"8.0","完成首次投资送现金","0"},
                {31560,"8.0","完成首次投资送现金","0"},
                {31463,"8.0","完成首次投资送现金","0"},
                {120,"2.88","好友完成首次投资送现金","0"},
                {120,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {23214,"8.0","完成首次投资送现金","0"},
                {28092,"2.88","好友完成首次投资送现金","0"},
                {28092,"0.1","好友完成首次投资送投资额千分之一现金","0"},
                {32877,"8.0","完成首次投资送现金","0"},
                {23209,"8.0","完成首次投资送现金","0"},
                {35577,"1.88","大转盘抽奖奖励","3"}
		};
		
		for(Object[] data : datas) {
			long accountId = new Long((Integer)data[0]);
			String value = (String)data[1];
			String remark = (String)data[2];
			String termType = (String)data[3];
			doPatchAward(accountId, value, remark, termType);
		}
		
	}
	
	public void doPatchAward(long accountId, String value, String remark, String termType) throws Exception {
		CustomerAccount customerAccount = customerAccountService.get(accountId + "");
		double amount = Double.parseDouble(value);
		if(amount > 0 && ProjectConstant.HASOPENED.equals(customerAccount.getHasOpenThirdAccount())) {
			yeepayCommonHandler.transferToCustomerFromPlatform(accountId, amount, ProjectConstant.CHANGE_TYPE_BALANCE_DOUBLE_HOLIDAY_INVESTMENT, remark, "");
		} else {
			throw new Exception("赠送失败");
		}
	}
}
